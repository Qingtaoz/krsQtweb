<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.qt.webframe.crm.dao.ServerMapper">
  <resultMap id="BaseResultMap" type="com.qt.webframe.crm.pojo.Server">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="serverid" jdbcType="VARCHAR" property="serverid" />
    <result column="serverNo" jdbcType="VARCHAR" property="serverno" />
    <result column="tradeNo" jdbcType="VARCHAR" property="tradeno" />
    <result column="startdate" jdbcType="TIMESTAMP" property="startdate" />
    <result column="enddate" jdbcType="TIMESTAMP" property="enddate" />
    <result column="servertype" jdbcType="VARCHAR" property="servertype" />
    <result column="content" jdbcType="VARCHAR" property="content" />
    <result column="amount" jdbcType="DECIMAL" property="amount" />
    <result column="validitydate" jdbcType="TIMESTAMP" property="validitydate" />
    <result column="servUsername" jdbcType="VARCHAR" property="servusername" />
    <result column="relax" jdbcType="VARCHAR" property="relax" />
    <result column="telphone" jdbcType="VARCHAR" property="telphone" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="isdel" jdbcType="BIT" property="isdel" />
    <result column="createuserid" jdbcType="VARCHAR" property="createuserid" />
    <result column="createdatetime" jdbcType="TIMESTAMP" property="createdatetime" />
    <result column="updateuserid" jdbcType="VARCHAR" property="updateuserid" />
    <result column="updatedatetime" jdbcType="TIMESTAMP" property="updatedatetime" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    serverid, serverNo, tradeNo, startdate, enddate, servertype, content, amount, validitydate, 
    servUsername, relax, telphone, remark, isdel, createuserid, createdatetime, updateuserid, 
    updatedatetime
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from t_crm_server
    where serverid = #{serverid,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from t_crm_server
    where serverid = #{serverid,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.qt.webframe.crm.pojo.Server">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_crm_server (serverid, serverNo, tradeNo, 
      startdate, enddate, servertype, 
      content, amount, validitydate, 
      servUsername, relax, telphone, 
      remark, isdel, createuserid, 
      createdatetime, updateuserid, updatedatetime
      )
    values (#{serverid,jdbcType=VARCHAR}, #{serverno,jdbcType=VARCHAR}, #{tradeno,jdbcType=VARCHAR}, 
      #{startdate,jdbcType=TIMESTAMP}, #{enddate,jdbcType=TIMESTAMP}, #{servertype,jdbcType=VARCHAR}, 
      #{content,jdbcType=VARCHAR}, #{amount,jdbcType=DECIMAL}, #{validitydate,jdbcType=TIMESTAMP}, 
      #{servusername,jdbcType=VARCHAR}, #{relax,jdbcType=VARCHAR}, #{telphone,jdbcType=VARCHAR}, 
      #{remark,jdbcType=VARCHAR}, #{isdel,jdbcType=BIT}, #{createuserid,jdbcType=VARCHAR}, 
      #{createdatetime,jdbcType=TIMESTAMP}, #{updateuserid,jdbcType=VARCHAR}, #{updatedatetime,jdbcType=TIMESTAMP}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.qt.webframe.crm.pojo.Server">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_crm_server
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="serverid != null">
        serverid,
      </if>
      <if test="serverno != null">
        serverNo,
      </if>
      <if test="tradeno != null">
        tradeNo,
      </if>
      <if test="startdate != null">
        startdate,
      </if>
      <if test="enddate != null">
        enddate,
      </if>
      <if test="servertype != null">
        servertype,
      </if>
      <if test="content != null">
        content,
      </if>
      <if test="amount != null">
        amount,
      </if>
      <if test="validitydate != null">
        validitydate,
      </if>
      <if test="servusername != null">
        servUsername,
      </if>
      <if test="relax != null">
        relax,
      </if>
      <if test="telphone != null">
        telphone,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="isdel != null">
        isdel,
      </if>
      <if test="createuserid != null">
        createuserid,
      </if>
      <if test="createdatetime != null">
        createdatetime,
      </if>
      <if test="updateuserid != null">
        updateuserid,
      </if>
      <if test="updatedatetime != null">
        updatedatetime,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="serverid != null">
        #{serverid,jdbcType=VARCHAR},
      </if>
      <if test="serverno != null">
        #{serverno,jdbcType=VARCHAR},
      </if>
      <if test="tradeno != null">
        #{tradeno,jdbcType=VARCHAR},
      </if>
      <if test="startdate != null">
        #{startdate,jdbcType=TIMESTAMP},
      </if>
      <if test="enddate != null">
        #{enddate,jdbcType=TIMESTAMP},
      </if>
      <if test="servertype != null">
        #{servertype,jdbcType=VARCHAR},
      </if>
      <if test="content != null">
        #{content,jdbcType=VARCHAR},
      </if>
      <if test="amount != null">
        #{amount,jdbcType=DECIMAL},
      </if>
      <if test="validitydate != null">
        #{validitydate,jdbcType=TIMESTAMP},
      </if>
      <if test="servusername != null">
        #{servusername,jdbcType=VARCHAR},
      </if>
      <if test="relax != null">
        #{relax,jdbcType=VARCHAR},
      </if>
      <if test="telphone != null">
        #{telphone,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="isdel != null">
        #{isdel,jdbcType=BIT},
      </if>
      <if test="createuserid != null">
        #{createuserid,jdbcType=VARCHAR},
      </if>
      <if test="createdatetime != null">
        #{createdatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateuserid != null">
        #{updateuserid,jdbcType=VARCHAR},
      </if>
      <if test="updatedatetime != null">
        #{updatedatetime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.qt.webframe.crm.pojo.Server">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_crm_server
    <set>
      <if test="serverno != null">
        serverNo = #{serverno,jdbcType=VARCHAR},
      </if>
      <if test="tradeno != null">
        tradeNo = #{tradeno,jdbcType=VARCHAR},
      </if>
      <if test="startdate != null">
        startdate = #{startdate,jdbcType=TIMESTAMP},
      </if>
      <if test="enddate != null">
        enddate = #{enddate,jdbcType=TIMESTAMP},
      </if>
      <if test="servertype != null">
        servertype = #{servertype,jdbcType=VARCHAR},
      </if>
      <if test="content != null">
        content = #{content,jdbcType=VARCHAR},
      </if>
      <if test="amount != null">
        amount = #{amount,jdbcType=DECIMAL},
      </if>
      <if test="validitydate != null">
        validitydate = #{validitydate,jdbcType=TIMESTAMP},
      </if>
      <if test="servusername != null">
        servUsername = #{servusername,jdbcType=VARCHAR},
      </if>
      <if test="relax != null">
        relax = #{relax,jdbcType=VARCHAR},
      </if>
      <if test="telphone != null">
        telphone = #{telphone,jdbcType=VARCHAR},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="isdel != null">
        isdel = #{isdel,jdbcType=BIT},
      </if>
      <if test="createuserid != null">
        createuserid = #{createuserid,jdbcType=VARCHAR},
      </if>
      <if test="createdatetime != null">
        createdatetime = #{createdatetime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateuserid != null">
        updateuserid = #{updateuserid,jdbcType=VARCHAR},
      </if>
      <if test="updatedatetime != null">
        updatedatetime = #{updatedatetime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where serverid = #{serverid,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.qt.webframe.crm.pojo.Server">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update t_crm_server
    set serverNo = #{serverno,jdbcType=VARCHAR},
      tradeNo = #{tradeno,jdbcType=VARCHAR},
      startdate = #{startdate,jdbcType=TIMESTAMP},
      enddate = #{enddate,jdbcType=TIMESTAMP},
      servertype = #{servertype,jdbcType=VARCHAR},
      content = #{content,jdbcType=VARCHAR},
      amount = #{amount,jdbcType=DECIMAL},
      validitydate = #{validitydate,jdbcType=TIMESTAMP},
      servUsername = #{servusername,jdbcType=VARCHAR},
      relax = #{relax,jdbcType=VARCHAR},
      telphone = #{telphone,jdbcType=VARCHAR},
      remark = #{remark,jdbcType=VARCHAR},
      isdel = #{isdel,jdbcType=BIT},
      createuserid = #{createuserid,jdbcType=VARCHAR},
      createdatetime = #{createdatetime,jdbcType=TIMESTAMP},
      updateuserid = #{updateuserid,jdbcType=VARCHAR},
      updatedatetime = #{updatedatetime,jdbcType=TIMESTAMP}
    where serverid = #{serverid,jdbcType=VARCHAR}
  </update>
  <!--selectByServerNo-->
  <select id="selectByServerNo" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from t_crm_server
    where serverNo = #{0}
  </select>
  <!--selectServListByStr-->
  <select id="selectServListByStr" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from t_crm_server
    <if test="param1.search != null">
      where serverNo like CONCAT('%','${param1.search}','%' )
    </if>
    order by ${param1.order} ${param1.dir}
    limit #{param2},#{param3}
  </select>
  <!--selectDeptServListByStr-->
  <select id="selectDeptServListByStr" resultMap="BaseResultMap">
    SELECT
    serv.*
    FROM
    t_crm_server serv
    INNER JOIN
    t_crm_trade tra ON serv.tradeNo = tra.tradeNo
    INNER JOIN
    r_dept_trade rdt ON rdt.tradeid = tra.tradeId
    WHERE
    rdt.deptid = '${param1.deptid}'
    <if test="param1.search != null">
      AND serv.serverNo like CONCAT('%','${param1.search}','%' )
    </if>
    order by ${param1.order} ${param1.dir}
    limit #{param2},#{param3}
  </select>
</mapper>